<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta http-equiv="Cache-Control" content="no-store, no-cache, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />
<title>Panel de Cliente</title>
<style>
/* ===== Reset y base ===== */
* { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
body { display: flex; min-height: 100vh; background: linear-gradient(160deg, #0d0c1d, #1a1134, #251f47); color: #fff; flex-direction: column; }

/* Header */
.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px 40px;
  background: rgba(15,15,30,0.8);
  border-bottom: 1px solid rgba(255,255,255,0.1);
}
.header h1 { font-size: 26px; }
.search-box { position: relative; }
.search-box input {
  padding: 8px 8px 8px 32px;
  border-radius: 10px;
  border: none;
  background-color: rgba(255,255,255,0.1);
  color: white;
  width: 200px;
}
.search-box input:focus { outline: none; background-color: rgba(255,255,255,0.15); }

/* Sidebar */
.container {
  display: flex;
  flex: 1;
}
.sidebar {
  width: 220px;
  background: rgba(15,15,30,0.8);
  backdrop-filter: blur(20px);
  padding: 20px 10px;
  border-right: 1px solid rgba(255,255,255,0.1);
}
.sidebar h2 { margin-bottom: 20px; text-align: center; color: #b089ff; }
.sidebar ul { list-style: none; }
.sidebar li { padding: 12px 20px; cursor: pointer; border-radius: 8px; transition: background 0.3s, color 0.3s; }
.sidebar li:hover, .sidebar li.active { background-color: rgba(75,0,255,0.3); color: #fff; }
.btn-logout { margin-top: 20px; width: 100%; padding: 10px; border: none; border-radius: 8px; background: rgba(75,0,255,0.7); color: #fff; font-weight: bold; cursor: pointer; }
.btn-logout:hover { background: rgba(105,51,255,0.8); }

/* Contenedor principal */
.main { flex: 1; padding: 40px; max-width: 1200px; }
.content { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px,1fr)); grid-gap: 20px; margin-top: 20px; }

/* Tarjetas y formularios */
.card { background: rgba(15,15,30,0.6); padding: 20px; border-radius: 12px; backdrop-filter: blur(15px); border: 1px solid rgba(255,255,255,0.05); box-shadow: 0 0 10px rgba(0,0,0,0.4); }
.card h3 { margin-bottom: 12px; font-size: 18px; color: #b089ff; }
input, textarea, select { background: #1e1b2e; color: #fff; border: 1px solid #6c3ef5; border-radius: 8px; padding: 10px 14px; font-size: 14px; outline: none; width: 100%; margin-top: 8px; box-shadow: inset 0 0 8px rgba(108,62,245,0.3); }
input:focus, textarea:focus, select:focus { border-color: #9d5cff; box-shadow: 0 0 10px rgba(157,92,255,0.8); }
button, input[type="submit"] { background: linear-gradient(90deg,#6c3ef5,#9d5cff); color:#fff; border:none; border-radius:8px; padding:8px 16px; font-size:14px; font-weight:bold; cursor:pointer; margin-top:10px; }
button:hover, input[type="submit"]:hover { background: linear-gradient(90deg,#9d5cff,#6c3ef5); transform: scale(1.05); }

/* Modal */
#customModal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); justify-content:center; align-items:center; z-index:9999; }
#customModal .modal-box { background:#1e1e2e; color:#fff; padding:20px 30px; border-radius:12px; max-width:400px; width:90%; text-align:center; box-shadow:0 4px 20px rgba(0,0,0,0.4); }
#customModal .modal-box p { margin-bottom:15px; font-size:16px; }
#customModal .modal-box button { padding:8px 16px; border:none; border-radius:6px; background:#6c3ef5; color:#fff; font-weight:bold; cursor:pointer; }
#customModal .modal-box button:hover { background:#8d5cff; }

/* Botón Eliminar Cuenta */
.btn-eliminar {
  margin-top: 10px;
  width: 100%;
  padding: 10px;
  border: none;
  border-radius: 8px;
  background: linear-gradient(90deg,rgba(75,0,255,0.7),rgba(105,51,255,0.8));
  color: #fff;
  font-weight: bold;
  cursor: pointer;
  transition: all 0.3s ease;
}
.btn-eliminar:hover {
  background: linear-gradient(90deg,#9d5cff,#6c3ef5);
  transform: scale(1.05);
  box-shadow: 0 0 10px rgba(157,92,255,0.6);
}

/* Avatar */
.avatar { 
  display: inline-block;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background-color: #6c3ef5;
  color: #fff;
  text-align: center;
  line-height: 40px;
  font-weight: bold;
  margin-left: 10px;
}
</style>
</head>
<body>

<!-- Header -->
<div class="header">
  <h1>Bienvenido <span id="avatarCliente" class="avatar"></span> <span id="nombreCliente"></span></h1>
  <div class="search-box">
    <input type="text" placeholder="Buscar...">
  </div>
</div>

<!-- Contenedor Sidebar + Main -->
<div class="container">
  <div class="sidebar">
    <h2>Panel Cliente</h2>
    <ul>
      <li class="active">Inicio</li>
      <li>Actualizar Información</li>
      <li>Cotizar</li>
      <li>Reservar Evento</li>
      <li>PQR</li>
      <li>Contactar Asesor</li>
    </ul>
    <button class="btn-logout">Cerrar sesión</button>
    <button id="btnEliminar" class="btn-eliminar">Eliminar Cuenta</button>
  </div>

  <div class="main">
    <div class="content"></div>
  </div>
</div>

<!-- Modal reutilizable -->
<div id="customModal">
  <div class="modal-box">
    <p id="modalMessage"></p>
    <div id="modalActions" style="margin-top:20px; display:flex; gap:10px; justify-content:center;"></div>
  </div>
</div>

<!-- Script -->
<script src="./panelCliente.js"></script>

<!-- Confirmación de eliminación -->
<script>
// Use the modal utilities already defined in panelCliente.js.
// This minimal handler simply triggers the existing confirmation flow.
const btnEliminar = document.getElementById('btnEliminar');
if (btnEliminar) {
  btnEliminar.addEventListener('click', () => {
    if (typeof mostrarConfirmacionFinal === 'function') mostrarConfirmacionFinal();
    else if (typeof abrirModal === 'function') abrirModal('¿Seguro que deseas eliminar tu cuenta? Esta acción es irreversible.', [
      { texto: 'Cancelar', accion: cerrarModal },
      { texto: 'Continuar', accion: () => { if (typeof mostrarConfirmacionFinal === 'function') mostrarConfirmacionFinal(); } }
    ]);
  });
}
</script>
<script>
  // Evitar que el navegador restaure la página desde bfcache y permita volver tras logout.
  window.addEventListener('pageshow', function(event) {
    if (event.persisted) {
      // Forzar recarga para limpiar estado y sesiones en memoria
      try { window.location.reload(); } catch(e) { /* ignore */ }
    }
  });
</script>
</body>
</html>
